<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Cruse WebViewer</title>
    <link rel="stylesheet" type="text/css" href="../templates/css/base.css">

    <!-- Javascript -->
    <script type="text/javascript" src="../../node_modules/jquery/dist/jquery.min.js"></script>    
    <script type="text/javascript" src="../../node_modules/dat.gui/build/dat.gui.min.js"></script>
    <script type="text/javascript" src="../../node_modules/bluebird/js/browser/bluebird.min.js"></script>
    <script type="text/javascript" src="../../node_modules/hammerjs/hammer.min.js"></script>
    <script type="text/javascript" src="../../builds/dist/OSG.js"></script>   
  </head>



  <body class="osgjs-theme-dark">

    <div id="ViewContainer" class="osgjs-fullpage">
    </div>
    <script type="text/javascript">
      var urlParam = function(name, w){
          w = w || window;
          var rx = new RegExp('[\&|\?]'+name+'=([^\&\#]+)'),
              val = w.location.search.match(rx);
          return !val ? '':val[1];
      }

     window.addEventListener(
        'load',
        function() {
            var shadingProjectUrl = urlParam('ShadingProject');
            var that = this;
            $.getJSON(shadingProjectUrl,
                function (shadingProject) 
                { 
                    var scanViewerWidget = new OSG.cruse.ScanViewerWidget("ViewContainer", shadingProject);
                    scanViewerWidget.run();
                });
        },
        true
    );
    </script>


    <div class="osgjs-info osgjs-info-dark">

      <div class="osgjs-description">
        Cruse WebViewer
      </div>
      <div style="border: 1px solid #a4b6bd; width:220px; height:5px; clear:both;">
        <div id="progress" style="height:5px; width:0px; background-color:#00aeef;"/>
      </div>
      <script type="text/javascript">
        var prg_width = 250;
        var node = document.getElementById('progress');
        function setProgress(percent) {
            node.style.width = percent + 'px';
        }
      </script>    
    </div>

  </body>

</html>
