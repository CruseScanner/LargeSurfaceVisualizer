<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Cruse WebViewer</title>
    <link rel="stylesheet" type="text/css" href="../templates/css/base.css">

    <!-- Javascript -->
    <script type="text/javascript" src="../../node_modules/jquery/dist/jquery.min.js"></script>    
    <script type="text/javascript" src="../../node_modules/dat.gui/build/dat.gui.min.js"></script>
    <script type="text/javascript" src="../../node_modules/bluebird/js/browser/bluebird.min.js"></script> 
    <script type="text/javascript" src="../../node_modules/hammerjs/hammer.min.js"></script>
    <script type="text/javascript" src="../../builds/dist/OSG.js"></script>   
  </head>

  <style type="text/css">

    .cruse-scanviewer-info {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      box-sizing: border-box;
      padding: 20px 160px 20px 20px;
      
      font-family: "Roboto", sans-serif;
      font-weight: 300;
      line-height: 1.5;
      color: #FFF;
    }

    .cruse-scanviewer-description 
    {
      font-size: 14px;      
    }

  </style>

  <body class="osgjs-theme-dark">

    <div id="ViewContainer" class="osgjs-fullpage">
    </div>
    <script type="text/javascript">
      var urlParam = function(name, w){
          w = w || window;
          var rx = new RegExp('[\&|\?]'+name+'=([^\&\#]+)'),
              val = w.location.search.match(rx);
          return !val ? '':val[1];
      }

     window.addEventListener(
        'load',
        function() {
            var shadingProjectUrl = urlParam('ShadingProject');
            var that = this;
            $.getJSON(shadingProjectUrl,
                function (shadingProject) 
                { 
                    var scanViewerWidget = new OSG.cruse.ScanViewerWidget("ViewContainer");
                    scanViewerWidget.run(shadingProject);
                });
        },
        true
    );
    </script>    

  </body>

</html>
